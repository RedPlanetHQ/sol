import { Injectable } from '@nestjs/common';
import { QdrantClient } from '@qdrant/js-client-rest';
import {
  EventBody,
  EventHeaders,
  IntegrationPayloadEventType,
} from '@sigma/types';
import { Response } from 'express';

import { IntegrationsService } from 'modules/integrations/integrations.service';
import { LoggerService } from 'modules/logger/logger.service';
import { PrismaService } from 'nestjs-prisma';

@Injectable()
export default class WebhookService {
  private readonly logger: LoggerService = new LoggerService('WebhookService'); // Logger instance for logging

  constructor(
    private integrations: IntegrationsService,
    private prisma: PrismaService,
  ) {}

  async handleEvents(
    response: Response,
    sourceName: string,
    eventHeaders: EventHeaders,
    eventBody: EventBody,
  ) {
    this.logger.log({
      message: `Received webhook ${sourceName}`,
      where: `WebhookService.handleEvents`,
    });

    response.status(200);

    const activity = await this.integrations.loadIntegration(sourceName, {
      event: IntegrationPayloadEventType.CREATE_ACTIVITY,
      eventBody,
      eventHeaders,
    });

    if (!activity) {
      response.status(401).send('Not valid signature');
    } else {
      response.status(200).json(activity);
    }

    return { status: 200 };
  }

  async indexData(repoName: string, owner: string) {
    const client = new QdrantClient({ host: 'localhost', port: 6333 });
    const collections = await client.getCollections();

    console.log(repoName, owner);

    const integrationAccount = await this.prisma.integrationAccount.findUnique({
      where: {
        id: '67710678-ea94-4fb5-8637-57716c2a394c',
      },
    });
    console.log(integrationAccount);

    console.log(collections);

    // const scrollResult = await client.scroll(
    //   '9dc44b20-7a11-422a-81f3-e26ae6dbb9d4', // collection name
    //   {
    //     limit: 100, // number of points to return
    //     with_payload: true, // include payload data
    //   },
    // );

    // console.log('Points in collection:', {
    //   points: scrollResult.points,
    //   count: scrollResult.points.length,
    // });

    const search = await client.search('9dc44b20-7a11-422a-81f3-e26ae6dbb9d4', {
      vector: [
        -0.0036930467, 0.016017221, 0.017336447, 0.0092771566, 0.031947713,
        0.02710237, -0.015127463, -0.0055543296, -0.02567395, 0.028131627,
        0.0090637291, 0.0089952871, -0.039642584, 0.014361267, -0.013194864,
        -0.0116724, 0.022170296, -0.025350021, -0.025450334, 0.021857861,
        0.031546459, 0.082683288, -0.049546439, 0.00122492, 0.0090240221,
        0.0077461372, -0.015199694, -0.047184892, 0.042267449, 0.009131128,
        -0.015779499, -0.059871919, -0.047611229, -0.020189108, 0.019156717,
        0.0088584004, 0.011557587, 0.021359431, 0.020349506, -0.013270621,
        0.026493175, 0.038549587, -0.023004675, -0.010740321, 0.015865657,
        -0.02513581, 0.025322853, 0.01412642, 0.031233242, 0.019678136,
        -0.038005702, 0.011033555, 0.0079864068, 0.043228786, 0.015875634,
        0.0015820253, 0.017289426, 0.015988486, 0.017103426, 0.053320728,
        0.042955015, -0.050052185, 0.041630045, -0.041800369, 0.010606832,
        -0.0069717127, -0.0070848917, -0.0075423103, -0.0018804837, 0.00547338,
        0.018359957, 0.038938303, 0.051790949, 0.0066729281, 0.0055308188,
        0.003750518, -0.017385788, 0.017043801, -0.037706327, 0.0032177337,
        0.028967833, -0.01477062, -0.0232518, 0.019839056, -0.02478628,
        0.022485865, -0.01563739, -0.022376148, -0.011647321, -0.0003531866,
        0.025052216, 0.020312933, 0.025836958, -0.010090374, -0.016706353,
        0.00079205754, -0.017034462, -0.038540702, -0.015534987, -0.028431522,
        -0.0069884975, 0.019072076, 0.0049120234, -0.015568423, -0.033705287,
        0.0045548533, -0.045784689, 0.026730374, 0.0047534555, -0.017499978,
        0.051903803, 0.020719934, 0.0050743143, 0.0090530198, -0.010965243,
        -0.048386566, 0.0040064855, 0.032812394, -0.026809268, -0.047727216,
        0.0077217775, 0.023501407, -0.0053534419, 0.021590883, 0.033287313,
        0.063198455, -0.023662457, 0.031199444, 0.019992923, -0.0045044352,
        0.0067362767, -0.021666232, -0.0026044084, -0.020076647, 0.069701061,
        -0.011224385, -0.01538517, 0.043400157, 0.028758585, 0.064338483,
        0.010011221, 0.017757554, -0.01363269, -0.048484787, 0.0064067156,
        -0.018393917, -0.029180737, -0.057926785, -0.024520345, 0.016863355,
        0.014711743, -0.0038798281, 0.0095457528, -0.053795125, -0.019347938,
        0.049477994, -0.004352137, 0.0098534366, 0.0053496538, 0.0298892,
        -0.0041003083, -0.00066431472, 0.020892086, -0.01428551, -0.0094900616,
        -0.018547783, 0.004856871, -0.015781458, -0.0067660166, 0.024590356,
        -0.010354741, 0.030081468, 0.022260161, 0.0094294557, -0.0081692692,
        -0.033776604, 0.032474361, -0.011734442, 0.0041747433, -0.010657771,
        0.0070621646, -0.023576774, -0.0065719946, -0.014315552, 0.012868715,
        -0.038296714, 0.000047021884, -0.016318647, 0.067159787, -0.057147264,
        0.032769028, -0.015549093, 0.080567293, 0.021226725, 0.020502064,
        -0.0072467257, -0.0090005118, -0.023613345, -0.012371458, 0.022919511,
        -0.0138004, -0.016278455, 0.017913772, 0.01235918, 0.028360989,
        -0.014383995, -0.002630156, -0.014210537, -0.034623779, -0.0077134836,
        -0.024550911, 0.0053996798, -0.020899661, 0.012258084, 0.006138185,
        -0.015739793, 0.023060055, 0.0048301923, -0.039061602, -0.02581704,
        -0.0021246057, 0.009197481, -0.0077829794, 0.017164035, 0.047888134,
        -0.038291488, 0.026551692, -0.0041705803, 0.0030798027, -0.021462357,
        0.00001214732, 0.042055853, 0.01833122, 0.0023184402, 0.047080401,
        0.020129547, 0.011798836, 0.057554789, -0.0098923603, -0.030906964,
        0.023435708, -0.032159835, -0.028182829, -0.017177617, 0.0039722393,
        -0.0021578474, 0.020251805, -0.023364652, -0.040246554, -0.0020177613,
        0.021095064, 0.040455539, 0.018702172, -0.014418837, -0.014686503,
        -0.030559525, 0.021256506, -0.0038970693, 0.046781551, 0.025988474,
        -0.045033384, 0.063180692, 0.023022177, -0.022906974, -0.0038789464,
        0.012638438, -0.023187015, -0.033204764, 0.079358049, -0.00027533926,
        0.0082306582, -0.0070764674, -0.0084472205, 0.0045376117, 0.03989128,
        -0.0040629525, -0.020050133, -0.0028391425, 0.035021901, -0.00015412729,
        0.0072591342, -0.012453485, 0.00043625862, 0.045433592, 0.026662063,
        -0.044461284, -0.042029206, 0.032293588, 0.014340108, -0.020687278,
        0.023368834, 0.026482727, 0.013689116, 0.010451659, 0.0085116802,
        0.020336965, -0.02927478, -0.017218893, 0.047848556, -0.027274786,
        0.0068531786, -0.013311831, 0.012325482, -0.018311106, 0.03695241,
        -0.0024691715, -0.021149399, 0.0017978034, 0.036242377, 0.017496321,
        -0.032871433, 0.021164028, -0.016554708, 0.0048518749, 0.020893391,
        0.0046354434, 0.024523482, 0.012353565, 0.016687544, -0.038390756,
        0.012820387, -0.027222538, 0.038524508, 0.028598972, -0.040390756,
        0.0083709406, 0.030622741, 0.0073332591, 0.0028467835, -0.027535494,
        0.014148364, 0.037819181, -0.018540991, -0.0017290992, -0.011617018,
        0.018722286, 0.010126425, -0.015979083, -0.01153197, 0.041329101,
        0.0023040725, -0.008173449, -0.0048077265, 0.021354206, -0.020315023,
        -0.022823378, 0.012825481, -0.031493168, 0.022286806, -0.03668125,
        0.015287077, 0.0064491821, -0.026161933, 0.0092411069, -0.010599778,
        -0.0049937242, 0.0065112254, 0.00052246539, -0.02972619, -0.021638492,
        -0.031271644, 0.012481176, 0.042369854, -0.0025331737, -0.021523485,
        0.014881904, -0.058946636, 0.047444038, -0.0016961839, 0.010386612,
        -0.0045766011, 0.035297763, 0.013252204, -0.009083584, 0.021550652,
        0.011121983, 0.0287147, -0.0020764736, 0.020278513, 0.0028826375,
        -0.0012428799, 0.044932023, -0.018748671, 0.033604976, -0.017813979,
        0.033680208, 0.011364406, -0.018990573, -0.010427364, 0.0011572608,
        0.027124314, 0.0012917958, 0.042122729, -0.017606562, 0.029644687,
        0.018195381, 0.027414804, -0.012761218, 0.04881081, 0.031152522,
        -0.029154092, -0.037575714, -0.028598711, 0.02628628, -0.026599236,
        -0.032609157, 0.027918696, 0.0069614267, -0.0025233773, 0.0082510356,
        -0.020359954, 0.0050193742, 0.016842717, -0.0031583032, 0.0085276803,
        -0.024672905, 0.0042424193, -0.050955005, -0.021820245, 0.014962103,
        0.016329329, -0.011264354, -0.035254918, -0.028481679, -0.014015657,
        0.019894045, 0.041324925, -0.011528199, 0.017067507, 0.033420023,
        -0.033237159, -0.029401219, -0.031510934, -0.047851168, -0.011158555,
        -0.013207338, 0.0098261377, -0.032344788, -0.0093646701, 0.032064747,
        -0.019739525, -0.01154335, -0.0049090851, 0.016402801, 0.0048264456,
        -0.011344212, 0.015552032, 0.0013035511, 0.0044012484, 0.025805611,
        -0.02208592, 0.052488964, 0.0015193294, -0.042866196, 0.001751304,
        -0.024697986, 0.0084843161, 0.0052531287, 0.00023941978, 0.023352114,
        0.030700069, 0.015021926, -0.0081464769, 0.047090851, -0.022845322,
        -0.027022433, -0.0099716438, 0.0099824853, 0.025784712, 0.018391827,
        -0.0035923414, 0.038766932, 0.0062873485, 0.013981175, 0.060898565,
        0.024099762, 0.037425242, -0.012862575, 0.032416888, 0.0035577444,
        -0.019584091, -0.030488469, -0.0063055046, -0.0055522397, -0.013404242,
        -0.035976965, -0.022760684, 0.006805765, 0.0012371327, -0.035521377,
        0.052134208, -0.024314495, 0.0012706358, -0.049524497, -0.020998929,
        -0.015582007, -0.0049989489, -0.0149446, 0.010658816, 0.000021159849,
        -0.0096725654, 0.038204763, 0.012062681, 0.014175531, -0.0032413753,
        -0.013169263, -0.0078944527, 0.034206852, -0.015283157, 0.02146497,
        0.042407472, 0.03686725, -0.03818804, -0.012105524, 0.014108591,
        -0.013743975, 0.028096098, 0.0033359416, 0.031020993, 0.0073333243,
        -0.017988222, 0.046049841, -0.022240829, 0.00023693805, 0.0025195894,
        -0.014210145, -0.051141005, -0.0029161405, -0.030094007, -0.027878754,
        0.016816594, 0.029872481, -0.01076971, 0.029665586, -0.0063343705,
        0.014597683, -0.037218343, 0.015417954, 0.037037309, 0.0070901164,
        0.020592451, -0.012239275, 0.01532391, -0.000076737109, -0.026102372,
        -0.0068407701, 0.0054289382, -0.0023145217, 0.0031666628, -0.035855755,
        0.040354181, -0.00066718832, -0.013016572, 0.023122752, 0.023443023,
        0.03780612, 0.051680189, 0.012150717, -0.034501523, -0.027821284,
        -0.011453061, -0.0046912166, -0.0094929347, 0.052474335, 0.022172779,
        0.035981148, 0.0021068417, -0.016198386, 0.035816047, -0.0057826471,
        -0.016834358, -0.011775064, -0.025995266, -0.025439885, 0.025957126,
        0.0097763725, 0.035218347, 0.025421599, 0.01109194, -0.0068894904,
        -0.020390781, 0.021239001, -0.027669767, -0.0071939896, -0.020025054,
        0.0030400956, -0.026647825, 0.029969661, -0.0085872412, 0.038867768,
        0.063978501, -0.00089524448, -0.0045476039, -0.043097127, 0.045030247,
        0.055623755, -0.045446131, -0.049807671, -0.0094574075, -0.0047249813,
        -0.022967579, 0.014033421, -0.038514059, 0.0027957123, 0.0014937285,
        -0.023289418, 0.018532893, 0.021468626, 0.055724069, 0.045787822,
        -0.049406417, 0.013737444, 0.0059590116, -0.014086712, -0.0064225364,
        0.034359414, -0.0065577244, -0.015297919, 0.069772124, -0.003733407,
        -0.013289953, -0.022295168, -0.013736661, -0.017850814, -0.026269559,
        -0.002161962, -0.030966524, 0.023027662, 0.0066739731, 0.030060571,
        0.0072183819, -0.044295661, -0.030048551, -0.068259582, -0.0049713887,
        -0.023314562, 0.034181777, 0.011433632, -0.012608658, -0.0088523924,
        0.045864623, -0.006068958, 0.034823362, 0.0081443209, 0.0023751277,
        0.0029662321, -0.0084771644, -0.037612285, -0.040959198, 0.038222522,
        -0.0042903554, 0.033556387, 0.024805611, -0.0093655847, -0.010614929,
        -0.01145009, -0.00014733525, 0.0021526553, -0.0053375065, 0.043006476,
        0.014054711, -0.0057902224, 0.00021603945, -0.035747085, -0.00055368268,
        -0.0063609672, -0.0026786802, 0.0023399917, 0.032783136, -0.028938314,
        0.025937272, -0.03182441, -0.038236108, -0.013803014, 0.052290425,
        -0.0032518248, 0.041005176, -0.056702126, 0.015736656, -0.02123639,
        -0.0097251711, -0.0030817622, 0.0030909055, 0.042308204, 0.049901716,
        -0.034656174, 0.00033583914, 0.020992398, -0.018775316, -0.013989011,
        0.0080107087, -0.011460279, 0.017935976, -0.027707385, -0.034329113,
        0.037335377, -0.045830667, -0.008087242, -0.02039705, 0.0084189093,
        -0.030154612, 0.026887115, 0.0064315489, -0.011644056, 0.025386594,
        0.02940801, 0.0056699575, -0.010185985, -0.029457644, -0.019124324,
        -0.030409046, 0.035109676, 0.045872465, -0.0092606992, -0.0196447,
        0.016182842, -0.0010653069, -0.0065268991, -0.015712624, 0.0091602551,
        -0.013813463, 0.038272683, 0.032747086, 0.0065794718, -0.043742891,
        -0.00066934346, 0.013461582, 0.013779763, 0.0317032, 0.028355243,
        -0.014309151, 0.035719916, 0.016817899, -0.032388676, 0.013987967,
        -0.0073576844, 0.0047089807, 0.0041643102, 0.028981155, -0.01642161,
        -0.013328615, -0.029005188, -0.038568918, 0.033188045, 0.022235213,
        0.0071269502, 0.0036920018, -0.01899893, 0.017183887, 0.024077296,
        -0.0078586629, -0.0026572589, -0.015992928, -0.045519277, 0.052810803,
        -0.034664534, 0.0089177331, 0.01092005, -0.02983382, 0.02071262,
        0.0027701117, -0.003093387, -0.013479991, 0.010330055, 0.022985604,
        0.012062224, 0.0055219368, 0.035059519, -0.0089916298, 0.029424207,
        0.0028153048, 0.019123279, 0.044279989, -0.013042565, 0.044664521,
        -0.0041630045, -0.028670812, 0.03456004, 0.016999979, 0.024335394,
        -0.02000102, -0.017283417, 0.021027159, -0.040653031, -0.046185941,
        -0.0059022917, 0.011783293, 0.021483777, 0.01573927, 0.0023150442,
        0.044435684, 0.019379286, -0.014052751, 0.022663504, 0.031855762,
        0.021983253, 0.032702938, 0.020024009, -0.0096128406, 0.0028631103,
        0.064819142, -0.0013685655, 0.018508337, -0.0036886057, 0.0028734943,
        0.014483785, -0.011495676, -0.016337493, -0.011948588, -0.011629296,
        -0.0029311616, -0.029469138, -0.05560286, 0.030824415, -0.044802453,
        0.010477717, -0.012355001, 0.04887037, 0.008881324, -0.037668709,
        -0.016522968, -0.020644696, -0.022295687, 0.0090316553, 0.0094255377,
        -0.0042631873, -0.0095020784, 0.024118047, -0.012472555, 0.0069725621,
        0.01029727, -0.0056972243, -0.0095637292, -0.023310317, -0.010847427,
        0.019554835, 0.021998929, -0.023235539, -0.018617531, -0.020144176,
        0.011274019, 0.015608393, -0.027882934, 0.03431553, -0.061721977,
        0.0027543639, 0.0099997921, 0.0092442418, -0.010031336, -0.018911941,
        0.010399674, -0.037602879, -0.033253878, -0.019886078, 0.013515919,
        -0.028089829, 0.0067243907, 0.0369289, 0.034028172, 0.010422923,
        -0.0057408498, -0.00615412, -0.0076018721, 0.018653059, -0.045567341,
        0.0013753248, -0.0040073092, 0.019327562, 0.021178657, -0.034038097,
        0.0087512955, -0.00058008352, -0.0015260807, -0.055120099, -0.017887387,
        -0.000807209, -0.0053254897, 0.000069173606, 0.050353125, 0.045896497,
        0.023663502, 0.008580449, -0.010175079, 0.070725091, 0.016891569,
        -0.022718886, -0.0274054, -0.045688555, 0.0032600535, -0.0026238214,
        0.011795441, -0.0073171277, -0.028243434, -0.013001682, 0.011530812,
        -0.012383475, -0.0028176559, -0.020514082, 0.0023851853, 0.018817114,
        0.014826001, 0.012910871, -0.0033256228, -0.0078887055, -0.0057166205,
        -0.0063143866, 0.0092549529, 0.0075250696, 0.014682061, 0.030513547,
        -0.00049248897, -0.0085585052, -0.031734549, 0.030250747, -0.0086306063,
        -0.0025971755, 0.00017920563, 0.036915313, 0.017139478, -0.043627951,
        0.018916382, -0.04152555, -0.024871442, -0.036505572, -0.024353679,
        -0.046407465, -0.015847422, 0.028264269, -0.034374043, 0.0089593343,
        0.01337642, -0.0054837968, -0.034279998, -0.0071713603, -0.021645742,
        -0.0019924217, -0.007812947, -0.0031956595, 0.030836951, 0.0085652974,
        -0.022635292, 0.057015602, -0.014320777, -0.017876675, 0.0040745605,
        0.0030606021, -0.049370892, 0.02647071, -0.00070402212, 0.020771787,
        0.0059301127, 0.0012635826, -0.0068281004, 0.019164031, 0.010523008,
        0.033115949, -0.015352908, 0.057469103, 0.017187543, 0.020934144,
        0.011058503, -0.0011980132, 0.0024072593, -0.01393572, 0.0081089241,
        -0.012141312, 0.016226729, -0.0051413211, 0.020115178, -0.014896533,
        0.016681276, 0.018969674, -0.0081421006, 0.020048043, 0.028564228,
        0.015577829, -0.018563164, 0.018599508, -0.01157287, 0.015289461,
        0.02046915, -0.047949787, 0.0056669209, 0.015283681, -0.028123267,
        -0.034969654, 0.029811876, -0.031828333, 0.0095334267, -0.0032620127,
        0.017640522, -0.0075342781, -0.0044320743, -0.0090193199, -0.025936227,
        -0.01984637, -0.015996322, 0.003015148, -0.020090101, 0.016432844,
        0.034451369, -0.014225296, -0.0084404284, -0.027701639, 0.0015982869,
        0.032323889, -0.0012492149, -0.040579364, 0.067364596, -0.004464475,
        0.002772724, 0.032048028, 0.018170301, 0.0011509913, 0.041847389,
        -0.028192233, -0.043556895, 0.0059830453, 0.0045182807, 0.000083855695,
        0.040835895, 0.053889174, -0.00049451349, 0.021971237, 0.023777401,
        -0.035724096, -0.027087741, 0.015065813, 0.021329127, -0.035730362,
        0.038366202, -0.041372988, 0.010495154, 0.0071464777, 0.019409589,
        -0.040700056, -0.029598711, 0.029918458, 0.012353173, -0.014446168,
        -0.019495273, 0.037751261, 0.028064752, -0.021901228, 0.0021692764,
        0.0033060305, 0.025590878, 0.01697072, -0.052631076, -0.053312369,
        0.014769574, 0.00077638362, -0.01057052, 0.0065676514, 0.021414813,
        0.032856803, -0.042704232, 0.006452186, -0.033141024, 0.010100824,
        0.031151475, 0.020070771, 0.028470185, -0.011505733, -0.029202681,
        0.030178646, -0.027644688, -0.032091916, 0.01325547, 0.020502197,
        -0.034085643, 0.015879814, 0.050484788, -0.022145219, 0.0071313917,
        0.054537028, 0.023194851, 0.063469097, -0.026712611, -0.053331181,
        -0.022115698, 0.0018325475, -0.020811886, -0.0092942677, -0.0482664,
        -0.023015646, 0.012952963, -0.043255955, 0.012645231, -0.023746051,
        0.03667707, 0.035281043, 0.037358366, -0.0059229289, 0.0016462884,
        -0.022989523, 0.037550632, -0.014279191, 0.013835928, -0.029178126,
        -0.011610227, 0.0016453741, 0.03911176, 0.0019080436, -0.011773235,
        0.010521212, 0.0029149, 0.0002381626, 0.010350301, 0.038923673,
        0.0041455016, 0.032840606, 0.0068798242, 0.047425229, -0.0010592986,
        -0.009177627, 0.043335371, -0.0078795617, 0.015668737, 0.031139983,
        0.053995755, -0.021556402, -0.036036007, 0.0090902448, 0.00012865711,
        -0.020029234, -0.026662454, 0.045372985, 0.020341668, 0.011271669,
        -0.039074142, -0.036532871, -0.05449941, -0.029523475, -0.0092064934,
        -0.023998925, -0.012409859, -0.040188037, -0.012446171, -0.052764628,
        -0.022680745, 0.016968632, 0.0264263, -0.00018782631, -0.051824391,
        0.031972598, 0.042695872, 0.0019007291, 0.031893376, 0.0080348002,
        -0.021513036, -0.01882704, 0.016170304, -0.017905934, -0.040493157,
        0.021436756, -0.032777391, -0.0085927276, 0.022317631, -0.0057424172,
        0.045065776, 0.0054429322, -0.0083226124, 0.012210017, -0.056363568,
        0.0012356307, 0.011356047, -0.0039776596, -0.048029199, 0.021578865,
        -0.0042096344, 0.035976965, -0.011442515, -0.023985865, 0.035128482,
        0.0037486893, 0.003855272, 0.016737701, -0.0011867802, 0.023956083,
        -0.0162121, -0.0053666336, 0.068357803, 0.0056938282, 0.0028079902,
        0.010620154, 0.013497894, 0.060617484, -0.02300572, 0.008874598,
        0.042147808, -0.012163517, -0.009844685, -0.047972772, -0.0072446358,
        -0.0014920306, -0.0039720433, -0.029202681, 0.016796216, 0.026505323,
        0.024269562, -0.033130579, -0.0079320697, -0.019175526, -0.020092648,
        0.033857845, 0.0034276342, -0.007019192, 0.021727245, -0.036684386,
        0.0014801446, -0.0023750623, -0.014606304, -0.02748795, 0.027936747,
        0.014337202, 0.013470856, -0.038154602, -0.007684486, -0.018627983,
        -0.015171873, 0.032043848, -0.022257026, 0.019915337, 0.0033717304,
        0.0043829624, -0.0013669757, -0.014737704, 0.062771082, -0.00060690887,
        -0.014842719, 0.01599789, 0.019575212, 0.046092879, -0.019293603,
        0.035596613, 0.020158675, -0.038326494, -0.0083719855, -0.012233527,
        -0.016346898, -0.035016414, -0.0050053494, 0.019082526, 0.021250756,
        -0.024871442, 0.0040252041, -0.033674464, -0.022049084, -0.003607101,
        -0.0017776886, 0.0079171788, 0.00080577226, 0.00075868506, 0.017974377,
        -0.027077291, -0.016855109, -0.042227745, -0.008402288, -0.019143393,
        0.017829655, 0.016593501, 0.0094101243, 0.030693797, -0.020869881,
        -0.020268522, -0.055671826, 0.024163503, 0.0012496066, -0.0067286361,
        -0.013031887, -0.043398067, -0.0039467034, -0.0015961317, -0.025809791,
        0.043265361, 0.019550132, -0.00088453392, 0.017160898, 0.0096767126,
        0.010653069, 0.016555883, 0.029417938, 0.024169773, 0.019260621,
        -0.021258594, -0.036580939, -0.045337979, 0.0082661863, 0.015527933,
        0.013130601, 0.044817083, 0.014842588, -0.0018274533, 0.018946685,
        -0.038643632, -0.0063439058, 0.015026628, 0.024913764, -0.0037998909,
        0.016241882, 0.011165869, 0.018043082, 0.00045542658, -0.042248122,
        0.0088052405, 0.026308224, -0.0021413243, -0.040836941, -0.012104217,
        -0.0016021401, 0.012323392, 0.040725134, -0.015131643, -0.020389473,
        0.027829643, -0.0031290452, -0.027234294, 0.0061166002, 0.02220713,
        0.031374048, -0.038175505, 0.0027100281, 0.024936229, -0.011844291,
        -0.057914246, 0.031343747, -0.015914982, 0.035711553, -0.061111733,
        -0.0091953911, 0.014275844, -0.03626537, -0.0083105965, -0.023490043,
        0.044521365, -0.010247637, -0.011574437, 0.0081154555, -0.0096831778,
        0.017654106, -0.044271626, 0.0055373493, -0.0041407994, 0.0059760902,
        0.0079677282, -0.015205964, 0.017461838, -0.0320125, 0.046781551,
        0.019444073, -0.020351071, -0.0094798738, 0.0068738814, -0.011873549,
        -0.008097169, 0.0029510153, 0.0039043839, -0.027310312, 0.023316586,
        -0.011435069, 0.02278785, -0.054240268, 0.0032161337, 0.0060433573,
        -0.033596616, -0.044921577, -0.0095325122, 0.04273349, -0.035661399,
        0.018627983, 0.019770091, 0.0095959585, 0.013739795, -0.010451398,
        0.0095098177, 0.03880037, 0.002753915, 0.021099243, 0.027777396,
        0.036213119, -0.029152526, -0.033125874, -0.017331222, 0.022999449,
        -0.034587208, -0.046221472, 0.060814813, -0.0087450258, -0.044305068,
        -0.023111779, -0.061387595, 0.008524023, 0.029300904, 0.015525582,
        0.025722018, -0.0098252883, -0.042959198, 0.0047807219, -0.020583047,
        0.017974377, -0.0030637372, -0.037747078, 0.0049405959, 0.02791428,
        0.01540437, 0.014655154, -0.0051449784, 0.0019640781, 0.033071015,
        0.015676051, -0.017562153, -0.0092175957, -0.017895108, -0.025481682,
        0.015563721, 0.028902786, -0.02276016, -0.020645287, -0.022654099,
        0.0057207346, -0.0022225678, 0.044186987, 0.0085412636, -0.013837528,
        -0.0024440931, -0.032718349, 0.014944077, -0.0097570419, -0.036433604,
        0.026968619, -0.0047418959, -0.023813974, 0.014341675, -0.019097155,
        0.008940951, -0.010049623, -0.0089764772, 0.019509381, -0.0041172886,
        -0.011926318, 0.0094265165, -0.025888683, -0.030364644, -0.023354204,
        -0.052397013, -0.046812899, -0.0026476586, 0.012593506, -0.029937267,
        0.008914304, -0.0071368124, -0.011586715, -0.022793075, -0.043056376,
        0.031583101, 0.012505209, 0.0016739792, -0.023452427, 0.038204763,
        -0.077747032, 0.020450341, -0.027283667, 0.049391787, 0.069640458,
        -0.0075244159, -0.048261173, 0.0298892, 0.016266437, 0.024143126,
        0.031743951, 0.00022988478, 0.013455573, -0.024237432, -0.040447183,
        -0.048860963, -0.044817083, -0.0076001738, -0.026695892, 0.0024527139,
        -0.019958701, 0.0029258388, -0.015226993, -0.061558962, 0.037931509,
        -0.0070703612, 0.014493974, -0.023096107, -0.023991611, 0.006466032,
        0.029594529, 0.023397045, 0.012576787, -0.0045295139, -0.034506749,
        0.012281856, 0.017045956, -0.016123805, -0.032784704, 0.01939078,
        0.014460275, 0.03564677, -0.019856786, 0.052710488, 0.0027981452,
        -0.0063732616, -0.0017682841, 0.0069039883, -0.029085647, 0.009236143,
        0.010004167, 0.0040999656, 0.037306514, 0.015564766, -0.0014188854,
        -0.021997882, 0.0096542463, -0.01022628, 0.0014340369, 0.03170738,
        0.018890521, 0.028206861, 0.035298806, -0.029715743, 0.015494233,
        0.015497369, 0.0077447658, -0.0037537671, -0.011604692, -0.0079302415,
        0.017528191, 0.039431509, -0.0056483736, 0.022206085, 0.029036537,
        -0.035138931,
      ],
    });
    console.log(search);
    // await this.integrations.loadIntegration('github', {
    //   event: IntegrationPayloadEventType.INDEX,
    //   repoName,
    //   owner,
    //   integrationAccount,
    //   workspaceId: integrationAccount.workspaceId,
    // });

    return { status: 200 };
  }
}
